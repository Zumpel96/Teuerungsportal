@page "/"

<PageTitle>@L?["appName"]</PageTitle>

<MudGrid>
    @if (Announcement != null)
    {
        <MudItem xs="12">
            <MudAlert Severity="Severity.Warning" Variant="Variant.Outlined">
                @if (L?["currLang"] == "de")
                {
                    @Announcement.ContentDe
                }
                else
                {
                    @Announcement.ContentEn
                }
            </MudAlert>
        </MudItem>
    }

    <MudItem xs="12" lg="6">
        <MudText Typo="Typo.h1">@L?["priceHistory"]</MudText>
        @if (IsLoadingPriceData)
        {
            <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="100%" Height="400px"/>
        }
        else
        {
            <InflationTransitionChart ChartData="@InflationHistory"/>
        }
    </MudItem>

    <MudItem xs="12" lg="6">
        <MudText Typo="Typo.h1">@L?["inflation"]</MudText>
        @if (IsLoadingPriceData)
        {
            <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="100%" Height="400px"/>
        }
        else
        {
            <InflationOverviewChart ChartData="@InflationOverview"/>
        }
    </MudItem>

    <MudItem xs="12" lg="4">
        <MudPaper>
            <MudText Typo="Typo.h1">@L?["welcome"]</MudText>
            <MudText Typo="Typo.body1">@L?["welcomeText"]</MudText>

            <MudDivider/>

            <MudText Typo="Typo.h1">@L?["performance"]</MudText>
            <MudText Typo="Typo.body1">@L?["performanceText"]</MudText>

            <MudDivider/>
            <MudButton Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.Handshake" Color="Color.Primary" Href="https://paypal.me/BRuckenstuhl" Target="blank">@L?["support"]</MudButton><br/>
            <MudText Typo="Typo.caption">@L?["supportInfo"]</MudText>
        </MudPaper>
    </MudItem>

    <MudItem xs="12" lg="8">
        <MudPaper>
            <MudText Typo="Typo.h1">@L?["topChanges"]</MudText>
            <MudAlert Severity="Severity.Info">@L?["topChangesInfo"]</MudAlert>

            <MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
                <MudTabPanel Text="@L?["decreases"]">
                    @if (TopPriceChanges.Any() || IsLoadingPriceData)
                    {
                        <RecentPriceChanges PriceChanges="@TopPriceChanges" Page="1" NumberOfPages="1" HideDate HidePagination HideCategory IsLoading="@IsLoadingPriceData"/>
                    }
                    else
                    {
                        <MudText Class="mt-3">
                            @L?["noTopChanges"]
                        </MudText>
                    }
                </MudTabPanel>
                <MudTabPanel Text="@L?["increases"]">
                    @if (WorstPriceChanges.Any() || IsLoadingPriceData)
                    {
                        <RecentPriceChanges PriceChanges="@WorstPriceChanges" Page="1" NumberOfPages="1" HideDate HidePagination HideCategory IsLoading="@IsLoadingPriceData"/>
                    }
                    else
                    {
                        <MudText Class="mt-3">
                            @L?["noWorstChanges"]
                        </MudText>
                    }
                </MudTabPanel>
            </MudTabs>
        </MudPaper>
    </MudItem>
</MudGrid>