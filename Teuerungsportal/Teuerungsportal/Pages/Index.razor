@page "/"

<PageTitle>@L?["appName"]</PageTitle>

<MudGrid>
    @if (Announcement != null)
    {
        <MudItem xs="12">
            <MudAlert Severity="Severity.Warning" Variant="Variant.Outlined">
                @if (L?["currLang"] == "de")
                {
                    @Announcement.ContentDe
                }
                else
                {
                    @Announcement.ContentEn
                }
            </MudAlert>
        </MudItem>
    }

    <MudItem xs="12" lg="6">
        <MudGrid>
            <MudItem xs="12">
                <MudPaper>
                    <MudText Typo="Typo.h1">@L?["welcome"]</MudText>
                    <MudText Typo="Typo.body1">@L?["welcomeText"]</MudText>
                </MudPaper>
            </MudItem>

            <MudItem xs="12">
                <MudPaper>
                    <MudText Typo="Typo.h1">@L?["performance"]</MudText>
                    <MudText Typo="Typo.body1">@L?["performanceText"]</MudText>

                    <MudDivider/>
                    <MudButton Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.Handshake" Color="Color.Primary" Href="https://paypal.me/BRuckenstuhl" Target="blank">@L?["support"]</MudButton><br/>
                    <MudText Typo="Typo.caption">@L?["supportInfo"]</MudText>
                </MudPaper>
            </MudItem>
        </MudGrid>
    </MudItem>

    <MudItem xs="12" lg="6">
        <MudAlert Severity="Severity.Info">@L?["chartInfo"]</MudAlert>
        @if (IsLoadingPriceData)
        {
            <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="100%" Height="400px"/>
        }
        else
        {
            <InflationChart ChartData="@TotalPriceHistory"/>
        }
    </MudItem>

    <MudItem xs="12">
        <MudGrid>
            <MudItem xs="12" lg="6">
                <MudPaper>
                    <MudText Typo="Typo.h1">@L?["topChanges"]</MudText>
                    <MudAlert Severity="Severity.Info" Variant="Variant.Outlined">@L?["topChangesInfo"]</MudAlert>

                    @if (TopPriceChanges.Any() || IsLoadingPriceData)
                    {
                        <RecentPriceChanges PriceChanges="@TopPriceChanges" Page="1" NumberOfPages="1" HideDate HidePagination HideCategory IsLoading="@IsLoadingPriceData"/>
                    }
                    else
                    {
                        <MudText Class="mt-3">
                            @L?["noTopChanges"]
                        </MudText>
                    }
                </MudPaper>
            </MudItem>

            <MudItem xs="12" lg="6">
                <MudPaper>
                    <MudText Typo="Typo.h1">@L?["worstChanges"]</MudText>
                    <MudAlert Severity="Severity.Info" Variant="Variant.Outlined">@L?["worstChangesInfo"]</MudAlert>

                    @if (WorstPriceChanges.Any() || IsLoadingPriceData)
                    {
                        <RecentPriceChanges PriceChanges="@WorstPriceChanges" Page="1" NumberOfPages="1" HideDate HidePagination HideCategory IsLoading="@IsLoadingPriceData"/>
                    }
                    else
                    {
                        <MudText Class="mt-3">
                            @L?["noWorstChanges"]
                        </MudText>
                    }
                </MudPaper>
            </MudItem>
        </MudGrid>
    </MudItem>

    <MudItem xs="12">
        <MudPaper>
            <MudText Typo="Typo.h1">@L?["todayChanges"]</MudText>
            <RecentPriceChanges PriceChanges="@PaginatedPriceHistory" Page="@CurrentPricePage" NumberOfPages="PricePages" PageChanged="@OnPricePageChanged" HideCategory IsLoading="@IsLoadingPriceData"/>
        </MudPaper>
    </MudItem>
</MudGrid>